<!DOCTYPE html>
<html>
<head>
    <title>–ú–∞—Ñ–∏—è - –ò–≥—Ä–∞</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="my-username" style="display: none;">{{ user.username }}</div>

    <div class="container">
        <div class="row">
            <div class="col s12">
                <div class="card">
                    <div class="card-content">
                        <div class="right">
                            <a href="{{ url_for('logout') }}" class="btn-flat waves-effect waves-light">
                                –í—ã–π—Ç–∏
                            </a>
                        </div>
                        <span class="card-title">–ö–æ–º–Ω–∞—Ç–∞: {{ room.code }}</span>
                        <p id="game-status">
                            {% if room.status == 'waiting' %}
                            üïí –û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
                            {% elif room.status == 'playing' %}
                            üéÆ –ò–≥—Ä–∞ –∏–¥–µ—Ç
                            {% else %}
                            üèÅ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞
                            {% endif %}
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col s12 m4">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">–ò–≥—Ä–æ–∫–∏</span>
                        <div id="players-list" class="collection">
                            {% for player in room.players %}
                            <div class="collection-item" data-username="{{ player.username }}">
                                {{ player.username }}
                                {% if not player.is_alive %}
                                <span class="badge">‚ò†Ô∏è</span>
                                {% endif %}
                            </div>
                            {% endfor %}
                        </div>
                        {% if room.status == 'waiting' and room.get_players_count() >= 4 %}
                        <button id="start-game" class="waves-effect waves-light btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                        {% endif %}
                    </div>
                </div>
                <!-- –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–∫—Ü–∏—é –¥–ª—è –∫–∞—Ä—Ç—ã —Ä–æ–ª–∏ -->
                <div class="card" id="role-card-section" style="display: none;">
                    <div class="card-content">
                        <span class="card-title">–í–∞—à–∞ —Ä–æ–ª—å</span>
                        <div class="role-card-container">
                            <img id="role-card-image" src="" alt="–ö–∞—Ä—Ç–∞ —Ä–æ–ª–∏" class="responsive-img">
                            <!-- –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–æ–ª–∏ -->
                            <div class="role-info">
                                <h5 id="role-name" class="center-align"></h5>
                                <p id="role-goal" class="center-align"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col s12 m8">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title">–ß–∞—Ç</span>
                        <div id="chat-messages" class="chat-messages"></div>
                        <div class="input-field">
                            <input type="text" id="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-content">
                        <span class="card-title">–î–µ–π—Å—Ç–≤–∏—è</span>
                        <div id="action-area">
                            {% if room.status == 'waiting' %}
                                <p>–û–∂–∏–¥–∞–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤...</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–æ–ª–∏ -->
    <div id="role-modal" class="modal">
        <div class="modal-content">
            <div id="role-text"></div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">–ü–æ–Ω—è—Ç–Ω–æ</a>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã -->
    <div id="game-over-modal" class="modal">
        <div class="modal-content">
            <h4>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h4>
            <div id="game-over-text"></div>
        </div>
        <div class="modal-footer">
            <a href="/" class="waves-effect waves-green btn-flat">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ª–æ–±–±–∏</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html> 